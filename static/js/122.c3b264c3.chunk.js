"use strict";(self.webpackChunkfurbabies_client=self.webpackChunkfurbabies_client||[]).push([[122],{3122:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var l=a(5043),t=a(3519),r=a(7417),i=a(1719),d=a(1072),n=a(8602),c=a(8628),o=a(9853),m=a(4282),x=a(5016),h=a(6305),u=a(579);const j=()=>{var e,s,a,j,p,A,f,N,y,b,v;const{user:g,loading:C}=(0,x.A)(),[L,S]=(0,l.useState)([]),[G,w]=(0,l.useState)(!1),[P,E]=(0,l.useState)(!1),[T,V]=(0,l.useState)(""),[k,z]=(0,l.useState)("");(0,l.useEffect)(()=>{g&&F()},[g]);const F=async()=>{try{w(!0);const e=await h.A.get("/users/favorites");S(e.data.data)}catch(k){console.error("Error fetching favorites:",k),z("Error loading favorites")}finally{w(!1)}};return C?(0,u.jsxs)(t.A,{className:"py-5 text-center",style:{marginTop:"80px"},children:[(0,u.jsx)(r.A,{animation:"border",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,u.jsx)("p",{children:"Loading profile..."})]}):g?(0,u.jsx)(t.A,{className:"py-5",style:{marginTop:"80px"},children:(0,u.jsx)(d.A,{children:(0,u.jsxs)(n.A,{md:8,className:"mx-auto",children:[(0,u.jsxs)(c.A,{children:[(0,u.jsxs)(c.A.Header,{children:[(0,u.jsxs)("h3",{children:[(0,u.jsx)("i",{className:"fas fa-user me-2"}),"My Profile"]}),(0,u.jsxs)("small",{className:"text-muted",children:["Welcome back, ",g.username,"!"]})]}),(0,u.jsxs)(c.A.Body,{children:[T&&(0,u.jsx)(i.A,{variant:"success",children:T}),k&&(0,u.jsx)(i.A,{variant:"danger",children:k}),(0,u.jsxs)(o.A,{onSubmit:async e=>{e.preventDefault(),E(!0),V(""),z("");try{const s=new FormData(e.target),a={profile:{firstName:s.get("firstName"),lastName:s.get("lastName"),phone:s.get("phone"),address:{street:s.get("street"),city:s.get("city"),state:s.get("state"),zipCode:s.get("zipCode")}}};await h.A.put("/users/profile",a),V("Profile updated successfully!"),window.location.reload()}catch(k){z("Error updating profile"),console.error("Error updating profile:",k)}finally{E(!1)}},children:[(0,u.jsxs)(d.A,{children:[(0,u.jsx)(n.A,{md:6,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"Username"}),(0,u.jsx)(o.A.Control,{type:"text",value:g.username||"",disabled:!0}),(0,u.jsx)(o.A.Text,{className:"text-muted",children:"Username cannot be changed"})]})}),(0,u.jsx)(n.A,{md:6,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"Email"}),(0,u.jsx)(o.A.Control,{type:"email",value:g.email||"",disabled:!0}),(0,u.jsx)(o.A.Text,{className:"text-muted",children:"Email cannot be changed"})]})})]}),(0,u.jsxs)(d.A,{children:[(0,u.jsx)(n.A,{md:6,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"First Name"}),(0,u.jsx)(o.A.Control,{type:"text",name:"firstName",defaultValue:(null===(e=g.profile)||void 0===e?void 0:e.firstName)||"",placeholder:"First Name"})]})}),(0,u.jsx)(n.A,{md:6,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"Last Name"}),(0,u.jsx)(o.A.Control,{type:"text",name:"lastName",defaultValue:(null===(s=g.profile)||void 0===s?void 0:s.lastName)||"",placeholder:"Last Name"})]})})]}),(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"Phone"}),(0,u.jsx)(o.A.Control,{type:"tel",name:"phone",defaultValue:(null===(a=g.profile)||void 0===a?void 0:a.phone)||"",placeholder:"Phone Number"})]}),(0,u.jsx)("h5",{className:"mt-4 mb-3",children:"Address"}),(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"Street Address"}),(0,u.jsx)(o.A.Control,{type:"text",name:"street",defaultValue:(null===(j=g.profile)||void 0===j||null===(p=j.address)||void 0===p?void 0:p.street)||"",placeholder:"Street Address"})]}),(0,u.jsxs)(d.A,{children:[(0,u.jsx)(n.A,{md:4,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"City"}),(0,u.jsx)(o.A.Control,{type:"text",name:"city",defaultValue:(null===(A=g.profile)||void 0===A||null===(f=A.address)||void 0===f?void 0:f.city)||"",placeholder:"City"})]})}),(0,u.jsx)(n.A,{md:4,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"State"}),(0,u.jsx)(o.A.Control,{type:"text",name:"state",defaultValue:(null===(N=g.profile)||void 0===N||null===(y=N.address)||void 0===y?void 0:y.state)||"",placeholder:"State"})]})}),(0,u.jsx)(n.A,{md:4,children:(0,u.jsxs)(o.A.Group,{className:"mb-3",children:[(0,u.jsx)(o.A.Label,{children:"ZIP Code"}),(0,u.jsx)(o.A.Control,{type:"text",name:"zipCode",defaultValue:(null===(b=g.profile)||void 0===b||null===(v=b.address)||void 0===v?void 0:v.zipCode)||"",placeholder:"ZIP Code"})]})})]}),(0,u.jsx)(m.A,{type:"submit",variant:"primary",disabled:P,children:P?"Updating...":"Update Profile"})]})]})]}),(0,u.jsxs)(c.A,{className:"mt-4",children:[(0,u.jsx)(c.A.Header,{children:(0,u.jsxs)("h4",{children:[(0,u.jsx)("i",{className:"fas fa-heart me-2"}),"Favorite Pets (",L.length,")"]})}),(0,u.jsx)(c.A.Body,{children:G?(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)(r.A,{animation:"border",size:"sm"}),(0,u.jsx)("span",{className:"ms-2",children:"Loading favorites..."})]}):0===L.length?(0,u.jsx)("p",{className:"text-muted",children:"You haven't added any pets to your favorites yet."}):(0,u.jsx)(d.A,{className:"g-3",children:L.map(e=>(0,u.jsx)(n.A,{md:6,lg:4,children:(0,u.jsxs)(c.A,{className:"h-100",children:[(0,u.jsx)(c.A.Img,{variant:"top",src:e.image,alt:e.name,style:{height:"150px",objectFit:"contain"}}),(0,u.jsxs)(c.A.Body,{children:[(0,u.jsx)(c.A.Title,{className:"h6",children:e.name}),(0,u.jsx)(c.A.Text,{className:"small",children:e.breed}),(0,u.jsxs)("div",{className:"price",children:["$",e.price]})]})]})},e._id))})})]})]})})}):(0,u.jsx)(t.A,{className:"py-5 text-center",style:{marginTop:"80px"},children:(0,u.jsx)(i.A,{variant:"danger",children:"You must be logged in to view your profile."})})}}}]);
//# sourceMappingURL=122.c3b264c3.chunk.js.map