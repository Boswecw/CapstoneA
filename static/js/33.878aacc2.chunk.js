"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[33],{1703:(e,s,a)=>{a.d(s,{A:()=>i});var n=a(5043);function t(e){const s=function(e){const s=(0,n.useRef)(e);return s.current=e,s}(e);(0,n.useEffect)(()=>()=>s.current(),[])}const r=2**31-1;function l(e,s,a){const n=a-Date.now();e.current=n<=r?setTimeout(s,n):setTimeout(()=>l(e,s,a),r)}function i(){const e=function(){const e=(0,n.useRef)(!0),s=(0,n.useRef)(()=>e.current);return(0,n.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),s.current}(),s=(0,n.useRef)();return t(()=>clearTimeout(s.current)),(0,n.useMemo)(()=>{const a=()=>clearTimeout(s.current);return{set:function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(a(),t<=r?s.current=setTimeout(n,t):l(s,n,Date.now()+t))},clear:a,handleRef:s}},[])}},3033:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var n=a(2555),t=a(5043),r=a(3519),l=a(1072),i=a(8602),o=a(9853),c=a(4282),d=a(1719),u=a(7417),x=a(6925),h=a(6305),m=a(579);const j=()=>{const[e,s]=(0,t.useState)([]),[a,j]=(0,t.useState)(!0),[p,v]=(0,t.useState)(""),[g,f]=(0,t.useState)({type:"all",size:"",minPrice:"",maxPrice:"",search:"",sort:"newest"});(0,t.useEffect)(()=>{A()},[g]);const A=async()=>{j(!0),v("");try{const e=new URLSearchParams;Object.entries(g).forEach(s=>{let[a,n]=s;n&&"all"!==n&&e.append(a,n)});const a=await h.A.get("/pets?".concat(e.toString()));s(a.data.data)}catch(p){v("Error fetching pets. Please try again."),console.error("Error fetching pets:",p)}finally{j(!1)}},b=(e,s)=>{f(a=>(0,n.A)((0,n.A)({},a),{},{[e]:s}))},N=(e,a)=>{s(s=>s.map(s=>{if(s._id===e){const e=(0,n.A)({},s);var t,r;if("up"===a)e.votes=(0,n.A)((0,n.A)({},e.votes),{},{up:((null===(t=e.votes)||void 0===t?void 0:t.up)||0)+1});else e.votes=(0,n.A)((0,n.A)({},e.votes),{},{down:((null===(r=e.votes)||void 0===r?void 0:r.down)||0)+1});return e}return s}))};return(0,m.jsxs)(r.A,{className:"py-5",style:{marginTop:"80px"},children:[(0,m.jsx)("h2",{className:"text-center mb-4",children:"Browse All Pets"}),(0,m.jsx)(l.A,{className:"mb-4",children:(0,m.jsx)(i.A,{children:(0,m.jsx)(o.A,{className:"p-3 bg-light rounded",children:(0,m.jsxs)(l.A,{className:"g-3",children:[(0,m.jsxs)(i.A,{md:2,children:[(0,m.jsx)(o.A.Label,{children:"Type"}),(0,m.jsxs)(o.A.Select,{value:g.type,onChange:e=>b("type",e.target.value),children:[(0,m.jsx)("option",{value:"all",children:"All Types"}),(0,m.jsx)("option",{value:"dog",children:"Dogs"}),(0,m.jsx)("option",{value:"cat",children:"Cats"}),(0,m.jsx)("option",{value:"fish",children:"Fish"}),(0,m.jsx)("option",{value:"bird",children:"Birds"}),(0,m.jsx)("option",{value:"small-pet",children:"Small Pets"}),(0,m.jsx)("option",{value:"supply",children:"Supplies"})]})]}),(0,m.jsxs)(i.A,{md:2,children:[(0,m.jsx)(o.A.Label,{children:"Size"}),(0,m.jsxs)(o.A.Select,{value:g.size,onChange:e=>b("size",e.target.value),children:[(0,m.jsx)("option",{value:"",children:"Any Size"}),(0,m.jsx)("option",{value:"small",children:"Small"}),(0,m.jsx)("option",{value:"medium",children:"Medium"}),(0,m.jsx)("option",{value:"large",children:"Large"}),(0,m.jsx)("option",{value:"extra-large",children:"Extra Large"})]})]}),(0,m.jsxs)(i.A,{md:1,children:[(0,m.jsx)(o.A.Label,{children:"Min Price"}),(0,m.jsx)(o.A.Control,{type:"number",placeholder:"$0",value:g.minPrice,onChange:e=>b("minPrice",e.target.value)})]}),(0,m.jsxs)(i.A,{md:1,children:[(0,m.jsx)(o.A.Label,{children:"Max Price"}),(0,m.jsx)(o.A.Control,{type:"number",placeholder:"$999",value:g.maxPrice,onChange:e=>b("maxPrice",e.target.value)})]}),(0,m.jsxs)(i.A,{md:2,children:[(0,m.jsx)(o.A.Label,{children:"Sort By"}),(0,m.jsxs)(o.A.Select,{value:g.sort,onChange:e=>b("sort",e.target.value),children:[(0,m.jsx)("option",{value:"newest",children:"Newest"}),(0,m.jsx)("option",{value:"price-low",children:"Price: Low to High"}),(0,m.jsx)("option",{value:"price-high",children:"Price: High to Low"}),(0,m.jsx)("option",{value:"popular",children:"Most Popular"})]})]}),(0,m.jsxs)(i.A,{md:3,children:[(0,m.jsx)(o.A.Label,{children:"Search"}),(0,m.jsx)(o.A.Control,{type:"text",placeholder:"Search pets...",value:g.search,onChange:e=>b("search",e.target.value)})]}),(0,m.jsx)(i.A,{md:1,className:"d-flex align-items-end",children:(0,m.jsx)(c.A,{variant:"outline-secondary",onClick:()=>{f({type:"all",size:"",minPrice:"",maxPrice:"",search:"",sort:"newest"})},children:"Clear"})})]})})})}),p&&(0,m.jsx)(d.A,{variant:"danger",className:"mb-4",children:p}),a?(0,m.jsx)("div",{className:"loading-spinner",children:(0,m.jsx)(u.A,{animation:"border",role:"status",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsxs)("span",{className:"text-muted",children:[e.length," pet",1!==e.length?"s":""," found"]})}),(0,m.jsx)(l.A,{className:"g-4",children:e.map(e=>(0,m.jsx)(i.A,{sm:6,md:4,lg:3,children:(0,m.jsx)(x.A,{pet:e,onVote:N})},e._id))}),0===e.length&&(0,m.jsxs)("div",{className:"text-center py-5",children:[(0,m.jsx)("i",{className:"fas fa-search fa-3x text-muted mb-3"}),(0,m.jsx)("h4",{children:"No pets found"}),(0,m.jsx)("p",{className:"text-muted",children:"Try adjusting your filters or search terms."})]})]})]})}},6925:(e,s,a)=>{a.d(s,{A:()=>_});var n=a(5043),t=a(8628),r=a(4063),l=a(4282),i=a(2555),o=a(45),c=a(8139),d=a.n(c),u=a(1703),x=a(8062),h=a(8072),m=a(579);const j={[x.ns]:"showing",[x.ze]:"showing show"},p=n.forwardRef((e,s)=>(0,m.jsx)(h.A,(0,i.A)((0,i.A)({},e),{},{ref:s,transitionClasses:j})));p.displayName="ToastFade";const v=p;var g=a(1456),f=a(7852),A=a(5632);const b=n.createContext({onClose(){}}),N=["bsPrefix","closeLabel","closeVariant","closeButton","className","children"],y=n.forwardRef((e,s)=>{let{bsPrefix:a,closeLabel:t="Close",closeVariant:r,closeButton:l=!0,className:c,children:u}=e,x=(0,o.A)(e,N);a=(0,f.oU)(a,"toast-header");const h=(0,n.useContext)(b),j=(0,g.A)(e=>{null==h||null==h.onClose||h.onClose(e)});return(0,m.jsxs)("div",(0,i.A)((0,i.A)({ref:s},x),{},{className:d()(a,c),children:[u,l&&(0,m.jsx)(A.A,{"aria-label":t,variant:r,onClick:j,"data-dismiss":"toast"})]}))});y.displayName="ToastHeader";const w=y,C=["className","bsPrefix","as"],E=n.forwardRef((e,s)=>{let{className:a,bsPrefix:n,as:t="div"}=e,r=(0,o.A)(e,C);return n=(0,f.oU)(n,"toast-body"),(0,m.jsx)(t,(0,i.A)({ref:s,className:d()(a,n)},r))});E.displayName="ToastBody";const P=E,S=["bsPrefix","className","transition","show","animation","delay","autohide","onClose","onEntered","onExit","onExiting","onEnter","onEntering","onExited","bg"],T=n.forwardRef((e,s)=>{let{bsPrefix:a,className:t,transition:r=v,show:l=!0,animation:c=!0,delay:x=5e3,autohide:h=!1,onClose:j,onEntered:p,onExit:g,onExiting:A,onEnter:N,onEntering:y,onExited:w,bg:C}=e,E=(0,o.A)(e,S);a=(0,f.oU)(a,"toast");const P=(0,n.useRef)(x),T=(0,n.useRef)(j);(0,n.useEffect)(()=>{P.current=x,T.current=j},[x,j]);const z=(0,u.A)(),L=!(!h||!l),R=(0,n.useCallback)(()=>{L&&(null==T.current||T.current())},[L]);(0,n.useEffect)(()=>{z.set(R,P.current)},[z,R]);const k=(0,n.useMemo)(()=>({onClose:j}),[j]),B=!(!r||!c),F=(0,m.jsx)("div",(0,i.A)((0,i.A)({},E),{},{ref:s,className:d()(a,t,C&&"bg-".concat(C),!B&&(l?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return(0,m.jsx)(b.Provider,{value:k,children:B&&r?(0,m.jsx)(r,{in:l,onEnter:N,onEntering:y,onEntered:p,onExit:g,onExiting:A,onExited:w,unmountOnExit:!0,children:F}):F})});T.displayName="Toast";const z=Object.assign(T,{Body:P,Header:w});var L=a(5475),R=a(5016),k=a(2224);const B=()=>{const[e,s]=(0,n.useState)(!1),[a,t]=(0,n.useState)(null),r=(0,n.useCallback)(async(e,a)=>{try{s(!0),t(null);return await e()}catch(n){const e=function(e){var s,a;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An error occurred";const t=(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||e.message||n;return console.error("API Error:",e),t}(n,a);throw t(e),n}finally{s(!1)}},[]);return{execute:r,loading:e,error:a,clearError:()=>t(null)}};var F=a(6305);const _=e=>{var s,a;let{pet:i,onVote:o,showAddToCart:c=!0}=e;const{user:d}=(0,R.A)(),{addToCart:u}=(0,k._)(),{execute:x,loading:h}=B(),[j,p]=(0,n.useState)(!1),v=async e=>{if(d&&!h)try{await x(()=>F.A.post("/pets/".concat(i._id,"/vote"),{voteType:e}),"Failed to vote"),null===o||void 0===o||o(i._id,e)}catch(s){}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(t.A,{className:"h-100 pet-card",children:[(0,m.jsxs)("div",{className:"position-relative",children:[(0,m.jsx)(t.A.Img,{variant:"top",src:i.image,alt:i.name,className:"card-img-top",loading:"lazy"}),(0,m.jsx)(r.A,{bg:i.available?"success":"secondary",className:"position-absolute top-0 end-0 m-2",children:i.available?"Available":"Adopted"})]}),(0,m.jsxs)(t.A.Body,{className:"d-flex flex-column",children:[(0,m.jsx)(t.A.Title,{className:"text-primary",children:i.name}),(0,m.jsxs)(t.A.Text,{className:"small flex-grow-1",children:[(0,m.jsx)("strong",{children:"Breed:"})," ",i.breed,(0,m.jsx)("br",{}),(0,m.jsx)("strong",{children:"Age:"})," ",i.age,(0,m.jsx)("br",{}),i.size&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("strong",{children:"Size:"})," ",i.size,(0,m.jsx)("br",{})]}),i.gender&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("strong",{children:"Gender:"})," ",i.gender,(0,m.jsx)("br",{})]}),(0,m.jsx)("div",{className:"mt-2",children:i.description})]}),(0,m.jsxs)("div",{className:"mt-auto",children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,m.jsx)("span",{className:"price fw-bold",children:(g=i.price,"number"===typeof g?"$".concat(g.toLocaleString()):g)}),i.averageRating>0&&(0,m.jsxs)("div",{className:"rating-stars",children:[(0,m.jsx)("i",{className:"fas fa-star text-warning"}),(0,m.jsx)("span",{className:"ms-1",children:i.averageRating})]})]}),(0,m.jsxs)("div",{className:"d-grid gap-2",children:[(0,m.jsx)(L.N_,{to:"/pet/".concat(i._id),className:"btn btn-primary btn-sm",children:"View Details"}),c&&i.available&&(0,m.jsxs)(l.A,{variant:"success",size:"sm",onClick:()=>{u(i),p(!0),setTimeout(()=>p(!1),3e3)},children:[(0,m.jsx)("i",{className:"fas fa-cart-plus me-1"}),"Add to Cart"]}),d&&(0,m.jsxs)("div",{className:"vote-buttons d-flex gap-1",children:[(0,m.jsxs)(l.A,{variant:"outline-success",size:"sm",onClick:()=>v("up"),disabled:h||!i.available,className:"flex-fill",children:[(0,m.jsx)("i",{className:"fas fa-thumbs-up"}),(0,m.jsx)("span",{className:"ms-1",children:(null===(s=i.votes)||void 0===s?void 0:s.up)||0})]}),(0,m.jsxs)(l.A,{variant:"outline-danger",size:"sm",onClick:()=>v("down"),disabled:h||!i.available,className:"flex-fill",children:[(0,m.jsx)("i",{className:"fas fa-thumbs-down"}),(0,m.jsx)("span",{className:"ms-1",children:(null===(a=i.votes)||void 0===a?void 0:a.down)||0})]})]})]})]})]})]}),(0,m.jsx)(z,{show:j,onClose:()=>p(!1),style:{position:"fixed",top:"100px",right:"20px",zIndex:9999},bg:"success",children:(0,m.jsxs)(z.Body,{className:"text-white",children:[(0,m.jsx)("i",{className:"fas fa-check-circle me-2"}),i.name," added to cart!"]})})]});var g}}}]);
//# sourceMappingURL=33.878aacc2.chunk.js.map