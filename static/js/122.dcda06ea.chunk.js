"use strict";(self.webpackChunkfurbabies_client=self.webpackChunkfurbabies_client||[]).push([[122],{3122:(e,s,l)=>{l.r(s),l.d(s,{default:()=>p});var a=l(5043),t=l(3519),r=l(7417),d=l(1072),i=l(8602),n=l(8628),o=l(1719),c=l(9853),h=l(4282),m=l(5016),x=l(6305),u=l(579);const p=()=>{var e,s,l,p,j,A,f,v,y,N,b;const{user:g}=(0,m.A)(),[C,L]=(0,a.useState)(null),[S,G]=(0,a.useState)([]),[E,P]=(0,a.useState)(!0),[V,w]=(0,a.useState)(!1),[T,F]=(0,a.useState)(""),[k,z]=(0,a.useState)("");(0,a.useEffect)(()=>{U(),B()},[]);const U=async()=>{try{const e=await x.A.get("/users/profile");L(e.data.data)}catch(k){z("Error loading profile"),console.error("Error fetching profile:",k)}finally{P(!1)}},B=async()=>{try{const e=await x.A.get("/users/favorites");G(e.data.data)}catch(k){console.error("Error fetching favorites:",k)}};return E?(0,u.jsx)(t.A,{className:"py-5 text-center",style:{marginTop:"80px"},children:(0,u.jsx)(r.A,{animation:"border",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,u.jsx)(t.A,{className:"py-5",style:{marginTop:"80px"},children:(0,u.jsx)(d.A,{children:(0,u.jsxs)(i.A,{md:8,className:"mx-auto",children:[(0,u.jsxs)(n.A,{children:[(0,u.jsx)(n.A.Header,{children:(0,u.jsxs)("h3",{children:[(0,u.jsx)("i",{className:"fas fa-user me-2"}),"My Profile"]})}),(0,u.jsxs)(n.A.Body,{children:[T&&(0,u.jsx)(o.A,{variant:"success",children:T}),k&&(0,u.jsx)(o.A,{variant:"danger",children:k}),(0,u.jsxs)(c.A,{onSubmit:async e=>{e.preventDefault(),w(!0),F(""),z("");try{const s=new FormData(e.target),l={profile:{firstName:s.get("firstName"),lastName:s.get("lastName"),phone:s.get("phone"),address:{street:s.get("street"),city:s.get("city"),state:s.get("state"),zipCode:s.get("zipCode")}}};await x.A.put("/users/profile",l),F("Profile updated successfully!"),U()}catch(k){z("Error updating profile"),console.error("Error updating profile:",k)}finally{w(!1)}},children:[(0,u.jsxs)(d.A,{children:[(0,u.jsx)(i.A,{md:6,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"Username"}),(0,u.jsx)(c.A.Control,{type:"text",value:(null===C||void 0===C?void 0:C.username)||"",disabled:!0}),(0,u.jsx)(c.A.Text,{className:"text-muted",children:"Username cannot be changed"})]})}),(0,u.jsx)(i.A,{md:6,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"Email"}),(0,u.jsx)(c.A.Control,{type:"email",value:(null===C||void 0===C?void 0:C.email)||"",disabled:!0}),(0,u.jsx)(c.A.Text,{className:"text-muted",children:"Email cannot be changed"})]})})]}),(0,u.jsxs)(d.A,{children:[(0,u.jsx)(i.A,{md:6,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"First Name"}),(0,u.jsx)(c.A.Control,{type:"text",name:"firstName",defaultValue:(null===C||void 0===C||null===(e=C.profile)||void 0===e?void 0:e.firstName)||"",placeholder:"First Name"})]})}),(0,u.jsx)(i.A,{md:6,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"Last Name"}),(0,u.jsx)(c.A.Control,{type:"text",name:"lastName",defaultValue:(null===C||void 0===C||null===(s=C.profile)||void 0===s?void 0:s.lastName)||"",placeholder:"Last Name"})]})})]}),(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"Phone"}),(0,u.jsx)(c.A.Control,{type:"tel",name:"phone",defaultValue:(null===C||void 0===C||null===(l=C.profile)||void 0===l?void 0:l.phone)||"",placeholder:"Phone Number"})]}),(0,u.jsx)("h5",{className:"mt-4 mb-3",children:"Address"}),(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"Street Address"}),(0,u.jsx)(c.A.Control,{type:"text",name:"street",defaultValue:(null===C||void 0===C||null===(p=C.profile)||void 0===p||null===(j=p.address)||void 0===j?void 0:j.street)||"",placeholder:"Street Address"})]}),(0,u.jsxs)(d.A,{children:[(0,u.jsx)(i.A,{md:4,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"City"}),(0,u.jsx)(c.A.Control,{type:"text",name:"city",defaultValue:(null===C||void 0===C||null===(A=C.profile)||void 0===A||null===(f=A.address)||void 0===f?void 0:f.city)||"",placeholder:"City"})]})}),(0,u.jsx)(i.A,{md:4,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"State"}),(0,u.jsx)(c.A.Control,{type:"text",name:"state",defaultValue:(null===C||void 0===C||null===(v=C.profile)||void 0===v||null===(y=v.address)||void 0===y?void 0:y.state)||"",placeholder:"State"})]})}),(0,u.jsx)(i.A,{md:4,children:(0,u.jsxs)(c.A.Group,{className:"mb-3",children:[(0,u.jsx)(c.A.Label,{children:"ZIP Code"}),(0,u.jsx)(c.A.Control,{type:"text",name:"zipCode",defaultValue:(null===C||void 0===C||null===(N=C.profile)||void 0===N||null===(b=N.address)||void 0===b?void 0:b.zipCode)||"",placeholder:"ZIP Code"})]})})]}),(0,u.jsx)(h.A,{type:"submit",variant:"primary",disabled:V,children:V?"Updating...":"Update Profile"})]})]})]}),(0,u.jsxs)(n.A,{className:"mt-4",children:[(0,u.jsx)(n.A.Header,{children:(0,u.jsxs)("h4",{children:[(0,u.jsx)("i",{className:"fas fa-heart me-2"}),"Favorite Pets (",S.length,")"]})}),(0,u.jsx)(n.A.Body,{children:0===S.length?(0,u.jsx)("p",{className:"text-muted",children:"You haven't added any pets to your favorites yet."}):(0,u.jsx)(d.A,{className:"g-3",children:S.map(e=>(0,u.jsx)(i.A,{md:6,lg:4,children:(0,u.jsxs)(n.A,{className:"h-100",children:[(0,u.jsx)(n.A.Img,{variant:"top",src:e.image,alt:e.name,style:{height:"150px",objectFit:"contain"}}),(0,u.jsxs)(n.A.Body,{children:[(0,u.jsx)(n.A.Title,{className:"h6",children:e.name}),(0,u.jsx)(n.A.Text,{className:"small",children:e.breed}),(0,u.jsxs)("div",{className:"price",children:["$",e.price]})]})]})},e._id))})})]})]})})})}}}]);
//# sourceMappingURL=122.dcda06ea.chunk.js.map