"use strict";(self.webpackChunkfurbabies_client=self.webpackChunkfurbabies_client||[]).push([[492],{2492:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(5043),n=a(5016),r=a(2555);const i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",l={brand:{logo:"/images/FurBabiesIcon.png",pawLove:"/images/PawLoveicon.png"},pets:{goldenRetriever:"/images/pets/GoldenRetriever.png",catA:"/images/CatA.png",betafish:"/images/Betafish.jpg",parrot:"/images/Parrot.png",rabbit:"/images/RabbitA.png",germanShepherd:"/images/germanshepherd.png",siamese:"/images/Siamese.png"},placeholders:{pet:"https://via.placeholder.com/300x200/cccccc/666666?text=Pet+Photo",product:"https://via.placeholder.com/300x200/cccccc/666666?text=Product",brand:"https://via.placeholder.com/300x200/cccccc/666666?text=Brand"}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pet";return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/assets/".concat(e):l.placeholders[t]||l.placeholders.pet};var c=a(579);console.log("\u2705 EnhancedAddPetForm is rendering");const d=e=>{let{onSubmit:t,onCancel:a}=e;console.log("Rendering EnhancedAddPetForm");const[n,i]=(0,s.useState)({name:"",type:"",breed:"",age:"",description:"",image:"",adopted:!1});console.log("Rendering EnhancedAddPetForm");const[l,d]=(0,s.useState)("url"),[p,h]=(0,s.useState)(""),[g,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(!1),b=e=>{const{name:t,value:a,type:s,checked:n}=e.target;i(e=>(0,r.A)((0,r.A)({},e),{},{[t]:"checkbox"===s?n:a})),"image"===t&&j(a)},j=async e=>{try{if(!e)return h(""),void m(!0);const t=o(e);h(t);const a=await(async e=>{if(!e)return!1;try{return new Promise(t=>{const a=new Image;a.onload=()=>t(!0),a.onerror=()=>t(!1),a.src=e,setTimeout(()=>t(!1),5e3)})}catch(t){return!1}})(t);m(a)}catch(t){console.error("handleImageChange crashed:",t),m(!1)}},y=e=>{d(e),i(e=>(0,r.A)((0,r.A)({},e),{},{image:""})),h(""),m(!0)};return(0,c.jsxs)("div",{className:"enhanced-pet-form",children:[(0,c.jsxs)("div",{className:"form-header",children:[(0,c.jsx)("h2",{children:"\ud83d\udc3e Add New Pet"}),(0,c.jsx)("button",{onClick:a,className:"close-btn",type:"button",children:"\xd7"})]}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!n.image||g){x(!0);try{const e=(0,r.A)((0,r.A)({},n),{},{age:n.age?parseInt(n.age):null,image:n.image||""});await t(e)}catch(a){console.error("Error adding pet:",a),alert("Error adding pet. Please try again.")}finally{x(!1)}}else alert("Please fix the image issue before submitting.")},children:[(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Pet Name *"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:n.name,onChange:b,placeholder:"Enter pet's name",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"type",children:"Type *"}),(0,c.jsxs)("select",{id:"type",name:"type",value:n.type,onChange:b,required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select type"}),(0,c.jsx)("option",{value:"Dog",children:"Dog"}),(0,c.jsx)("option",{value:"Cat",children:"Cat"}),(0,c.jsx)("option",{value:"Bird",children:"Bird"}),(0,c.jsx)("option",{value:"Rabbit",children:"Rabbit"}),(0,c.jsx)("option",{value:"Hamster",children:"Hamster"}),(0,c.jsx)("option",{value:"Gerbil",children:"Gerbil"}),(0,c.jsx)("option",{value:"Chinchilla",children:"Chinchilla"}),(0,c.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"breed",children:"Breed"}),(0,c.jsx)("input",{type:"text",id:"breed",name:"breed",value:n.breed,onChange:b,placeholder:"Enter breed (optional)"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"age",children:"Age (years)"}),(0,c.jsx)("input",{type:"number",id:"age",name:"age",value:n.age,onChange:b,placeholder:"Enter age",min:"0",max:"30"})]})]}),(0,c.jsxs)("div",{className:"form-group image-section",children:[(0,c.jsx)("label",{children:"Pet Image"}),(0,c.jsxs)("div",{className:"image-options",children:[(0,c.jsxs)("label",{className:"radio-option",children:[(0,c.jsx)("input",{type:"radio",name:"imageOption",value:"url",checked:"url"===l,onChange:()=>y("url")}),(0,c.jsx)("span",{children:"Image URL"})]}),(0,c.jsxs)("label",{className:"radio-option",children:[(0,c.jsx)("input",{type:"radio",name:"imageOption",value:"local",checked:"local"===l,onChange:()=>y("local")}),(0,c.jsx)("span",{children:"Local Image"})]})]}),"url"===l&&(0,c.jsxs)("div",{className:"image-input",children:[(0,c.jsx)("input",{type:"url",name:"image",value:n.image,onChange:b,placeholder:"https://example.com/pet-image.jpg",className:g?"":"error"}),!g&&(0,c.jsx)("span",{className:"error-text",children:"\u274c Invalid image URL"}),(0,c.jsx)("small",{className:"help-text",children:"\ud83d\udca1 Try Unsplash: https://unsplash.com/s/photos/pets"})]}),"local"===l&&(0,c.jsxs)("div",{className:"local-images",children:[(0,c.jsxs)("select",{name:"image",value:n.image,onChange:b,children:[(0,c.jsx)("option",{value:"",children:"Select a local image"}),["beagle.jpg","ragdoll.jpg","aussie.jpg","russian-blue.jpg","poodle-mix.jpg","black-cat.jpg","mini-rex.jpg","cockatiel.jpg","tuxedo-cat.jpg"].map(e=>(0,c.jsx)("option",{value:e,children:e},e))]}),(0,c.jsx)("div",{className:"path-info",children:(0,c.jsxs)("small",{children:["\ud83d\udca1 Place images in: ",(0,c.jsx)("code",{children:"public/images/pets/"})]})}),(0,c.jsxs)("details",{className:"path-help",children:[(0,c.jsx)("summary",{children:"\ud83d\udcc1 How to add your own images"}),(0,c.jsxs)("div",{className:"help-content",children:[(0,c.jsxs)("ol",{children:[(0,c.jsxs)("li",{children:["Create folder: ",(0,c.jsx)("code",{children:"public/images/pets/"})]}),(0,c.jsx)("li",{children:"Copy your image files there"}),(0,c.jsx)("li",{children:'Use filename only (e.g., "mydog.jpg")'}),(0,c.jsx)("li",{children:"Refresh this page and the file will appear in the dropdown"})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Supported formats:"})," .jpg, .jpeg, .png, .gif, .webp"]})]})]})]}),p&&(0,c.jsxs)("div",{className:"image-preview",children:[(0,c.jsx)("h4",{children:"Preview:"}),(0,c.jsxs)("div",{className:"preview-container",children:[(0,c.jsx)("img",{src:p,alt:"Preview",onError:()=>m(!1),onLoad:()=>m(!0)}),!g&&(0,c.jsx)("div",{className:"preview-error",children:(0,c.jsx)("span",{children:"\u274c Image failed to load"})})]}),(0,c.jsx)("div",{className:"preview-path",children:(0,c.jsxs)("small",{children:["Path: ",(0,c.jsx)("code",{children:p})]})})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"description",children:"Description"}),(0,c.jsx)("textarea",{id:"description",name:"description",value:n.description,onChange:b,placeholder:"Tell us about this pet's personality, needs, etc.",rows:"4"})]}),(0,c.jsx)("div",{className:"form-group checkbox-group",children:(0,c.jsxs)("label",{className:"checkbox-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"adopted",checked:n.adopted,onChange:b}),(0,c.jsx)("span",{className:"checkmark"}),"Mark as adopted"]})}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"button",onClick:a,className:"btn btn-secondary",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u||n.image&&!g,children:u?"Adding Pet...":"Add Pet"})]})]})]})},p=e=>{let{pet:t,onSubmit:a,onCancel:n}=e;const[i,l]=(0,s.useState)({name:(null===t||void 0===t?void 0:t.name)||"",type:(null===t||void 0===t?void 0:t.type)||"",breed:(null===t||void 0===t?void 0:t.breed)||"",age:(null===t||void 0===t?void 0:t.age)||"",description:(null===t||void 0===t?void 0:t.description)||"",image:(null===t||void 0===t?void 0:t.image)||"",adopted:(null===t||void 0===t?void 0:t.adopted)||!1}),[o,d]=(0,s.useState)(!1),p=e=>{const{name:t,value:a,type:s,checked:n}=e.target;l(e=>(0,r.A)((0,r.A)({},e),{},{[t]:"checkbox"===s?n:a}))};return(0,c.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto",background:"white",borderRadius:"12px",overflow:"hidden"},children:[(0,c.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px 30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)("h2",{style:{margin:0,fontSize:"1.5rem"},children:"\u270f\ufe0f Edit Pet"}),(0,c.jsx)("button",{onClick:n,style:{background:"none",border:"none",color:"white",fontSize:"24px",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"35px",height:"35px"},type:"button",children:"\xd7"})]}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{const e=(0,r.A)((0,r.A)({},i),{},{age:i.age?parseInt(i.age):null});await a(e)}catch(t){console.error("Error updating pet:",t),alert("Error updating pet. Please try again.")}finally{d(!1)}},style:{padding:"30px"},children:[(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Pet Name *"}),(0,c.jsx)("input",{type:"text",name:"name",value:i.name,onChange:p,required:!0,style:{width:"100%",padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Type *"}),(0,c.jsxs)("select",{name:"type",value:i.type,onChange:p,required:!0,style:{width:"100%",padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"},children:[(0,c.jsx)("option",{value:"",children:"Select type"}),(0,c.jsx)("option",{value:"Dog",children:"Dog"}),(0,c.jsx)("option",{value:"Cat",children:"Cat"}),(0,c.jsx)("option",{value:"Bird",children:"Bird"}),(0,c.jsx)("option",{value:"Rabbit",children:"Rabbit"}),(0,c.jsx)("option",{value:"Hamster",children:"Hamster"}),(0,c.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Breed"}),(0,c.jsx)("input",{type:"text",name:"breed",value:i.breed,onChange:p,style:{width:"100%",padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Age (years)"}),(0,c.jsx)("input",{type:"number",name:"age",value:i.age,onChange:p,min:"0",max:"30",style:{width:"100%",padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]})]}),(0,c.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Image URL"}),(0,c.jsx)("input",{type:"url",name:"image",value:i.image,onChange:p,placeholder:"https://example.com/pet-image.jpg",style:{width:"100%",padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"}})]}),(0,c.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Description"}),(0,c.jsx)("textarea",{name:"description",value:i.description,onChange:p,rows:"4",style:{width:"100%",padding:"12px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",resize:"vertical",minHeight:"100px",boxSizing:"border-box"}})]}),(0,c.jsx)("div",{style:{marginBottom:"30px"},children:(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",name:"adopted",checked:i.adopted,onChange:p}),(0,c.jsx)("span",{children:"Mark as adopted"})]})}),(0,c.jsxs)("div",{style:{display:"flex",gap:"15px",justifyContent:"flex-end"},children:[(0,c.jsx)("button",{type:"button",onClick:n,style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},children:"Cancel"}),(0,c.jsx)("button",{type:"submit",disabled:o,style:{padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",opacity:o?.6:1},children:o?"Updating Pet...":"Update Pet"})]})]})]})};var h=a(9209);const g=()=>{const{user:e,logout:t}=(0,n.A)(),{pets:a,loading:l,error:o,deletePet:g,addPet:m,updatePet:u}=(()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)({page:1,limit:12,total:0,totalPages:0}),p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=localStorage.getItem("token"),s="".concat(i).concat(e),n=(0,r.A)({headers:(0,r.A)((0,r.A)({"Content-Type":"application/json"},a&&{Authorization:"Bearer ".concat(a)}),t.headers)},t);try{const e=await fetch(s,n);if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.message||t.error||"HTTP error! status: ".concat(e.status))}return await e.json()}catch(l){throw console.error("API request failed: ".concat(e),l),l}},h=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{n(!0),o(null),console.log("\ud83d\udc3e Fetching pets from API...",{filters:e,page:a});const s=new URLSearchParams((0,r.A)({page:a.toString(),limit:c.limit.toString()},e)),i=await p("/pets?".concat(s));console.log("\u2705 Pets fetched successfully:",i);let l=[],h={};return i.success&&i.data?(l=Array.isArray(i.data)?i.data:[],h={page:i.currentPage||a,limit:c.limit,total:i.total||0,totalPages:i.pages||0}):Array.isArray(i)&&(l=i),console.log("\ud83d\udccb Processed pets array:",l),t(l),d(h),{pets:l,pagination:h}}catch(s){throw console.error("\u274c Error fetching pets:",s),o(s.message),t([]),s}finally{n(!1)}},[c.limit]),g=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;try{n(!0),o(null),console.log("\u2b50 Fetching featured pets...");const t=await p("/pets/featured?limit=".concat(e));console.log("\u2705 Featured pets fetched:",t);const a=t.success?t.data:t;return Array.isArray(a)?a:[]}catch(t){return console.error("\u274c Error fetching featured pets:",t),o(t.message),[]}finally{n(!1)}},[]),m=(0,s.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{n(!0),o(null),console.log("\ud83d\udd0d Fetching pets by type:",e);const s=new URLSearchParams({page:a.toString(),limit:c.limit.toString()}),i=await p("/pets/type/".concat(e,"?").concat(s));console.log("\u2705 Pets by type fetched:",i);const l=i.success?i.data:i,h=Array.isArray(l)?l:[];return t(h),d(e=>(0,r.A)((0,r.A)({},e),{},{page:i.currentPage||a,total:i.total||0,totalPages:i.pages||0})),h}catch(s){throw console.error("\u274c Error fetching pets by type:",s),o(s.message),s}finally{n(!1)}},[c.limit]),u=(0,s.useCallback)(async e=>{try{console.log("\u2795 Adding new pet:",e);const a=await p("/pets",{method:"POST",body:JSON.stringify(e)});console.log("\u2705 Pet added successfully:",a);const s=a.success?a.data:a;return t(e=>[s,...e]),s}catch(a){throw console.error("\u274c Error adding pet:",a),o(a.message),a}},[]),x=(0,s.useCallback)(async(e,a)=>{try{console.log("\u270f\ufe0f Updating pet:",e,a);const s=await p("/pets/".concat(e),{method:"PUT",body:JSON.stringify(a)});console.log("\u2705 Pet updated successfully:",s);const n=s.success?s.data:s;return t(t=>t.map(t=>t._id===e?n:t)),n}catch(s){throw console.error("\u274c Error updating pet:",s),o(s.message),s}},[]),b=(0,s.useCallback)(async e=>{try{return console.log("\ud83d\uddd1\ufe0f Deleting pet:",e),await p("/pets/".concat(e),{method:"DELETE"}),console.log("\u2705 Pet deleted successfully"),t(t=>t.filter(t=>t._id!==e)),!0}catch(a){throw console.error("\u274c Error deleting pet:",a),o(a.message),a}},[]),j=(0,s.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up";try{console.log("\ud83d\udc4d Voting for pet:",e,a);const s=await p("/pets/".concat(e,"/vote"),{method:"POST",body:JSON.stringify({voteType:a})});console.log("\u2705 Vote submitted successfully:",s);const n=s.success?s.data:s;return t(t=>t.map(t=>t._id===e?(0,r.A)((0,r.A)({},t),{},{votes:n.votes||t.votes}):t)),n}catch(s){throw console.error("\u274c Error voting for pet:",s),o(s.message),s}},[]),y=(0,s.useCallback)(async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{console.log("\u2b50 Rating pet:",e,a,s);const n=await p("/pets/".concat(e,"/rate"),{method:"POST",body:JSON.stringify({rating:a,comment:s})});console.log("\u2705 Rating submitted successfully:",n);const i=n.success?n.data:n;return t(t=>t.map(t=>t._id===e?(0,r.A)((0,r.A)({},t),{},{averageRating:i.averageRating,ratings:i.ratings||t.ratings}):t)),i}catch(n){throw console.error("\u274c Error rating pet:",n),o(n.message),n}},[]),v=(0,s.useCallback)(async e=>{try{console.log("\ud83d\udd0d Fetching pet by ID:",e);const t=await p("/pets/".concat(e));return console.log("\u2705 Pet fetched by ID:",t),t.success?t.data:t}catch(t){throw console.error("\u274c Error fetching pet by ID:",t),o(t.message),t}},[]),f=(0,s.useCallback)(t=>t&&"all"!==t?e.filter(e=>e.type&&e.type.toLowerCase()===t.toLowerCase()):e,[e]),w=(0,s.useCallback)(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.filter(e=>e.available===t)},[e]),C=(0,s.useCallback)(t=>t&&"all"!==t?e.filter(e=>e.size&&e.size.toLowerCase()===t.toLowerCase()):e,[e]),P=(0,s.useCallback)((t,a)=>e.filter(e=>{const s=e.price||0;return s>=(t||0)&&s<=(a||1/0)}),[e]),N=(0,s.useCallback)(t=>{if(!t)return e;const a=t.toLowerCase();return e.filter(e=>e.name&&e.name.toLowerCase().includes(a)||e.breed&&e.breed.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a))},[e]),S=(0,s.useCallback)(()=>{const t=e.length,a=e.filter(e=>e.available).length,s=e.filter(e=>!e.available).length,n=e.reduce((e,t)=>{const a=t.type||"Unknown";return e[a]=(e[a]||0)+1,e},{}),r=e.length>0?e.reduce((e,t)=>e+(t.price||0),0)/e.length:0;return{total:t,available:a,adopted:s,byType:n,averagePrice:Math.round(100*r)/100}},[e]),A=(0,s.useCallback)(()=>{o(null)},[]),k=(0,s.useCallback)(()=>h({},c.page),[h,c.page]);return(0,s.useEffect)(()=>{h()},[h]),(0,s.useEffect)(()=>{console.log("\ud83d\udcca usePets state updated:",{petsCount:e.length,loading:a,error:l,pagination:c})},[e,a,l,c]),{pets:e,loading:a,error:l,pagination:c,fetchPets:h,fetchFeaturedPets:g,fetchPetsByType:m,addPet:u,updatePet:x,deletePet:b,getPetById:v,votePet:j,ratePet:y,filterPetsByType:f,filterPetsByStatus:w,filterPetsBySize:C,filterPetsByPriceRange:P,searchPets:N,getPetStats:S,refresh:k,refetch:k,clearError:A}})(),[x,b]=(0,s.useState)(!1),[j,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(b(!1),y(null))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);if(console.log("\ud83c\udf9b\ufe0f AdminDashboard render:",{user:null===e||void 0===e?void 0:e.email,petsCount:null===a||void 0===a?void 0:a.length,showAddForm:x,editingPet:!!j,loading:l,error:o}),l)return(0,c.jsxs)("div",{className:"admin-loading",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"Loading admin dashboard..."})]});const v={total:Array.isArray(a)?a.length:0,available:Array.isArray(a)?a.filter(e=>!e.adopted).length:0,adopted:Array.isArray(a)?a.filter(e=>e.adopted).length:0};return(0,c.jsxs)("div",{className:"admin-dashboard",children:[(0,c.jsx)("header",{className:"admin-header",children:(0,c.jsxs)("div",{className:"admin-header-content",children:[(0,c.jsx)("h1",{children:"\ud83d\udc3e Furbabies Admin Dashboard"}),(0,c.jsxs)("div",{className:"admin-user-info",children:[(0,c.jsxs)("span",{children:["Welcome, ",(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.username)||(null===e||void 0===e?void 0:e.email)||"Admin","!"]}),(0,c.jsx)("button",{onClick:()=>{t()},className:"logout-btn",children:"Logout"})]})]})}),(0,c.jsxs)("main",{className:"admin-main",children:[(0,c.jsxs)("div",{className:"admin-stats",children:[(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("h3",{children:"Total Pets"}),(0,c.jsx)("span",{className:"stat-number",children:v.total})]}),(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("h3",{children:"Available"}),(0,c.jsx)("span",{className:"stat-number",children:v.available})]}),(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("h3",{children:"Adopted"}),(0,c.jsx)("span",{className:"stat-number",children:v.adopted})]})]}),o&&(0,c.jsx)("div",{className:"error-banner",children:(0,c.jsxs)("p",{children:["Error: ",String(o)]})}),(0,c.jsx)("div",{className:"admin-actions",children:(0,c.jsx)("button",{onClick:()=>{console.log("\ud83d\uddb1\ufe0f Add Pet button clicked"),b(!0)},className:"btn btn-primary add-pet-btn",children:"+ Add New Pet"})}),x&&(0,c.jsx)("div",{className:"modal-overlay",onClick:()=>b(!1),children:(0,c.jsx)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:(0,c.jsx)(h.A,{children:(0,c.jsx)(d,{onSubmit:async e=>{try{console.log("\ud83d\udcdd AdminDashboard: Adding pet:",e),await m(e),b(!1),alert("Pet added successfully!")}catch(o){console.error("\u274c AdminDashboard: Error adding pet:",o),alert("Error adding pet: "+o.message)}},onCancel:()=>b(!1)})})})}),j&&(0,c.jsx)("div",{className:"modal-overlay",onClick:()=>y(null),children:(0,c.jsx)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:(0,c.jsx)(h.A,{children:(0,c.jsx)(p,{pet:j,onSubmit:e=>(async(e,t)=>{try{await u(e,t),y(null),alert("Pet updated successfully!")}catch(o){alert("Error updating pet: "+o.message)}})(j._id,e),onCancel:()=>y(null)})})})}),(0,c.jsxs)("div",{className:"pets-management",children:[(0,c.jsx)("h2",{children:"Manage Pets"}),Array.isArray(a)&&a.length>0?(0,c.jsx)("div",{className:"admin-pets-grid",children:a.map(e=>e&&"object"===typeof e&&e._id?(0,c.jsxs)("div",{className:"admin-pet-card",children:[(0,c.jsx)("div",{className:"pet-image",children:e.image?(0,c.jsx)("img",{src:String(e.image),alt:String(e.name)}):(0,c.jsx)("div",{className:"placeholder-image",children:"\ud83d\udcf8"})}),(0,c.jsxs)("div",{className:"pet-details",children:[(0,c.jsx)("h3",{children:String(e.name||"Unnamed Pet")}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Type:"})," ",String(e.type||"Unknown")]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Breed:"})," ",String(e.breed||"Mixed")]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Age:"})," ",String(e.age||"Unknown")," ","years"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Votes:"})," ",Number(e.votes)||0]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Status:"}),(0,c.jsx)("span",{className:"status ".concat(e.adopted?"adopted":"available"),children:e.adopted?"Adopted":"Available"})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Description:"})," ",String(e.description||"No description")]})]}),(0,c.jsxs)("div",{className:"admin-pet-actions",children:[(0,c.jsx)("button",{onClick:()=>y(e),className:"btn btn-secondary",children:"\u270f\ufe0f Edit"}),(0,c.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Are you sure you want to delete ".concat(t,"? This action cannot be undone.")))try{await g(e),alert("".concat(t," has been deleted successfully."))}catch(o){alert("Error deleting pet: "+o.message)}})(e._id,e.name),className:"btn btn-danger",children:"\ud83d\uddd1\ufe0f Delete"})]})]},e._id):(console.warn("Invalid pet object:",e),null))}):(0,c.jsxs)("div",{className:"no-pets",children:[(0,c.jsx)("p",{children:"No pets in the database yet."}),(0,c.jsx)("button",{onClick:()=>b(!0),className:"btn btn-primary",children:"Add Your First Pet"})]})]})]})]})}}}]);
//# sourceMappingURL=492.164786df.chunk.js.map