"use strict";(self.webpackChunkfurbabies_client=self.webpackChunkfurbabies_client||[]).push([[843],{843:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var t=a(5043),n=a(3216),i=a(5475),r=a(3519),l=a(7417),c=a(1719),d=a(1072),o=a(8602),h=a(8628),x=a(4063),m=a(4282),j=a(9853),p=a(5016),u=a(6305),g=a(579);const v=()=>{var e,s;const{id:a}=(0,n.g)(),{user:v}=(0,p.A)(),[A,b]=(0,t.useState)(null),[y,f]=(0,t.useState)(!0),[N,w]=(0,t.useState)(""),[S,T]=(0,t.useState)(5),[C,B]=(0,t.useState)(""),[k,D]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{const e=await u.A.get("/pets/".concat(a));b(e.data.data)}catch(N){w("Pet not found"),console.error("Error fetching pet:",N)}finally{f(!1)}})()},[a]);const L=async e=>{if(v)try{await u.A.post("/pets/".concat(a,"/vote"),{voteType:e});const s=await u.A.get("/pets/".concat(a));b(s.data.data)}catch(N){console.error("Error voting:",N)}};return y?(0,g.jsx)(r.A,{className:"py-5 text-center",style:{marginTop:"80px"},children:(0,g.jsx)(l.A,{animation:"border",role:"status",children:(0,g.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):N||!A?(0,g.jsx)(r.A,{className:"py-5",style:{marginTop:"80px"},children:(0,g.jsxs)(c.A,{variant:"danger",children:[(0,g.jsx)("h4",{children:"Pet Not Found"}),(0,g.jsx)("p",{children:"The pet you're looking for doesn't exist or has been removed."}),(0,g.jsx)(i.N_,{to:"/browse",className:"btn btn-primary",children:"Browse All Pets"})]})}):(0,g.jsxs)(r.A,{className:"py-5",style:{marginTop:"80px"},children:[(0,g.jsxs)(d.A,{children:[(0,g.jsx)(o.A,{md:6,children:(0,g.jsx)(h.A,{children:(0,g.jsx)(h.A.Img,{variant:"top",src:A.image,alt:A.name,style:{height:"400px",objectFit:"contain"}})})}),(0,g.jsxs)(o.A,{md:6,children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,g.jsx)("h1",{children:A.name}),(0,g.jsx)(x.A,{bg:A.available?"success":"secondary",className:"fs-6",children:A.available?"Available":"Adopted"})]}),(0,g.jsx)("h3",{className:"text-success mb-3",children:"number"===typeof A.price?"$".concat(A.price.toLocaleString()):A.price}),(0,g.jsx)(h.A,{className:"mb-3",children:(0,g.jsx)(h.A.Body,{children:(0,g.jsxs)(d.A,{children:[(0,g.jsxs)(o.A,{sm:6,children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Type:"})," ",A.type]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Breed:"})," ",A.breed]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Age:"})," ",A.age]})]}),(0,g.jsxs)(o.A,{sm:6,children:[A.size&&(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Size:"})," ",A.size]}),A.gender&&(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Gender:"})," ",A.gender]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Posted:"})," ",new Date(A.createdAt).toLocaleDateString()]})]})]})})}),(0,g.jsx)(h.A,{className:"mb-3",children:(0,g.jsxs)(h.A.Body,{children:[(0,g.jsx)(h.A.Title,{children:"Description"}),(0,g.jsx)(h.A.Text,{children:A.description})]})}),v&&(0,g.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,g.jsxs)(m.A,{variant:"outline-success",onClick:()=>L("up"),disabled:!A.available,children:[(0,g.jsx)("i",{className:"fas fa-thumbs-up me-1"}),"Upvote (",(null===(e=A.votes)||void 0===e?void 0:e.up)||0,")"]}),(0,g.jsxs)(m.A,{variant:"outline-danger",onClick:()=>L("down"),disabled:!A.available,children:[(0,g.jsx)("i",{className:"fas fa-thumbs-down me-1"}),"Downvote (",(null===(s=A.votes)||void 0===s?void 0:s.down)||0,")"]})]}),(0,g.jsxs)(i.N_,{to:"/contact",className:"btn btn-primary btn-lg",children:[(0,g.jsx)("i",{className:"fas fa-envelope me-2"}),"Contact About ",A.name]})]})]}),(0,g.jsx)(d.A,{className:"mt-5",children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)("h3",{children:"Ratings & Reviews"}),A.ratings&&A.ratings.length>0&&(0,g.jsx)("div",{className:"mb-3",children:(0,g.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,g.jsx)("div",{className:"display-6 me-3",children:A.averageRating}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{children:[...Array(5)].map((e,s)=>(0,g.jsx)("i",{className:"fas fa-star ".concat(s<Math.floor(A.averageRating)?"text-warning":"text-muted")},s))}),(0,g.jsxs)("small",{className:"text-muted",children:["Based on ",A.ratings.length," review",1!==A.ratings.length?"s":""]})]})]})}),v&&(0,g.jsx)(h.A,{className:"mb-4",children:(0,g.jsxs)(h.A.Body,{children:[(0,g.jsx)(h.A.Title,{children:"Leave a Review"}),(0,g.jsxs)(j.A,{onSubmit:async e=>{if(e.preventDefault(),v&&!k){D(!0);try{await u.A.post("/pets/".concat(a,"/rate"),{rating:S,comment:C}),B("");const e=await u.A.get("/pets/".concat(a));b(e.data.data)}catch(N){console.error("Error submitting rating:",N)}finally{D(!1)}}},children:[(0,g.jsxs)(j.A.Group,{className:"mb-3",children:[(0,g.jsx)(j.A.Label,{children:"Rating"}),(0,g.jsxs)(j.A.Select,{value:S,onChange:e=>T(parseInt(e.target.value)),children:[(0,g.jsx)("option",{value:5,children:"5 Stars - Excellent"}),(0,g.jsx)("option",{value:4,children:"4 Stars - Very Good"}),(0,g.jsx)("option",{value:3,children:"3 Stars - Good"}),(0,g.jsx)("option",{value:2,children:"2 Stars - Fair"}),(0,g.jsx)("option",{value:1,children:"1 Star - Poor"})]})]}),(0,g.jsxs)(j.A.Group,{className:"mb-3",children:[(0,g.jsx)(j.A.Label,{children:"Comment (Optional)"}),(0,g.jsx)(j.A.Control,{as:"textarea",rows:3,value:C,onChange:e=>B(e.target.value),placeholder:"Share your thoughts about this pet..."})]}),(0,g.jsx)(m.A,{type:"submit",variant:"primary",disabled:k,children:k?"Submitting...":"Submit Review"})]})]})}),A.ratings&&A.ratings.map((e,s)=>{var a;return(0,g.jsx)(h.A,{className:"mb-3",children:(0,g.jsxs)(h.A.Body,{children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:(null===(a=e.user)||void 0===a?void 0:a.username)||"Anonymous"}),(0,g.jsx)("div",{children:[...Array(5)].map((s,a)=>(0,g.jsx)("i",{className:"fas fa-star ".concat(a<e.rating?"text-warning":"text-muted")},a))})]}),(0,g.jsx)("small",{className:"text-muted",children:new Date(e.createdAt).toLocaleDateString()})]}),e.comment&&(0,g.jsx)(h.A.Text,{children:e.comment})]})},s)}),(!A.ratings||0===A.ratings.length)&&(0,g.jsxs)(c.A,{variant:"info",children:["No reviews yet. Be the first to review ",A.name,"!"]})]})})]})}}}]);
//# sourceMappingURL=843.d2460fcf.chunk.js.map